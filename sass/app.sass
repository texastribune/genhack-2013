@import "compass/css3/box-sizing"
@import "compass/css3/transform"
@import "compass/css3/transition"

$columns: 2
$imgWidth: 160px
// $imgHeight: 160px
$imgHeight: $imgWidth * 3 / 4
$borderWidth: 4px
$boxWidth: $imgWidth + 2 * $borderWidth
$boxHeight: $imgHeight + 2 * $borderWidth

$narrowing: 25px

$leaguegothic: 'LeagueGothicRegular'
$knockout29: 'Knockout 29 A', 'Knockout 29 B'
$knockout49: 'Knockout 49 A','Knockout 49 B'
$knockout50: 'Knockout 50 A', 'Knockout 50 B'

$headingFontFamily: $knockout29


body
  background: #333
  color: #eee
  margin: 0 auto
  max-width: $columns * $boxWidth
  width: 100%

header, footer
  font-family: $headingFontFamily
  font-size: 1.5em
  text-transform: uppercase

#canvas
  position: relative

.notice
  position: absolute
  top: 0
  left: 0

.tile
  +box-sizing(border-box)
  +transition-property(border-color, border-width, height, transform)
  +transition-duration(1s)
  border: $borderWidth solid gray
  float: left
  height: $boxHeight
  overflow: hidden
  width: 100% / $columns
  > img
    +transition-property(top, opacity)
    +transition-duration(2s)
    display: block
    max-width: 100%
    position: relative
    top: 0

%narrowed
  border-top-width: $narrowing + $borderWidth
  border-bottom-width: $narrowing + $borderWidth
  > img
    top: -$narrowing

.active
  // @extend %narrowed
  border-color: green

.correct .active
  border-color: lime

.inactive
  @extend %narrowed
  > img
    opacity: 0.5


@mixin _pos($idx)
  +transition-delay(#{$idx / 10}s)
  &.start, &.end
    +transform(translate3d((($idx % $columns) * 2 - 1) * $boxWidth, (floor($idx / $columns) * 2 - 1) * $boxHeight, 0))
  &.active
    +transform(translate3d((($idx % $columns) * 2 - 1) * 10px, (floor($idx / $columns) * 2 - 1) * 10px, 0))

.pos-0
  +_pos(0)

.pos-1
  +_pos(1)

.pos-2
  +_pos(2)

.pos-3
  +_pos(3)
